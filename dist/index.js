import{useState as n,useEffect as r,createContext as t,useContext as e,useReducer as o}from"react";import{jsx as a}from"react/jsx-runtime";var i=["0","1","2","3","4","5","6","7","8","9","10","11"],u=function(n,r){if(!r)return n;for(var t=0,e=Object.entries(r);t<e.length;t++){var o=e[t],a=o[0],i=o[1];n=n.replaceAll("{".concat(a,"}"),i.toString())}return n},l=function(n,r,t){if(void 0===n&&(n=""),"object"!=typeof n)return u(n,r);if(!t)return u(n[5],r);var e="1",o=Math.floor(t/10)%10==1;!o&&[2,3,4].includes(t%10)&&(e="2"),(o||[5,6,7,8,9,0].includes(t%10))&&(e="5");var a=n[e];if(r)for(var i=0,l=Object.entries(r);i<l.length;i++){var c=l[i],v=c[0],f=c[1];a=a.replaceAll("{".concat(v,"}"),f.toString())}return u(a,r)},c=3600,v=86400,f=function(n,r,t,e,o){var a=Math.round((+new Date-n)/1e3);return e&&a<v*e?o?function(n,r){var t=r,e=Math.round((+new Date-n)/1e3);if(e<30)return l(t.just);if(e<60)return l(t.seconds,{seconds:e},e);if(e<c){var o=Math.floor(e/60);return l(t.minutes,{minutes:o},o)}if(e<v){var a=Math.floor(e/c);return l(t.hours,{hours:a},a)}if(e<2*v)return l(t.yesterday);var i=Math.floor(e/v);return l(t.more,{days:i},i)}(n,o):"":r&&t?function(n,r,t){var e=new Date(n),o=e.getDate(),a=e.getMonth().toString(),i=e.getFullYear(),u=r;return(u=(u=u.replace("{day}",o.toString())).replace("{month}",t[a])).replace("{year}",i.toString())}(n,r,t):""},s="langpackupdate",d=new Event(s),g=null,h=function(){return g},m=function(n){g=n,n&&function(n){var r=JSON.stringify(n),t=n.hash+r;localStorage.setItem("yermak-langs-cache",t)}(n),dispatchEvent(d)},p=function(n,r,t){var e=h();if(!(null==e?void 0:e.commons))return"";var o=e.commons[n];return l(o,r,t)},y=function(n,r,t,e,o){var a,i,u,l=h();if(!(null==l?void 0:l.commons)||!l.dates||!(null==l?void 0:l.relativeDates))return"";var c=null===(a=null==l?void 0:l.dates)||void 0===a?void 0:a[r],v=null===(i=null==l?void 0:l.months)||void 0===i?void 0:i[t],s=o?null===(u=null==l?void 0:l.relativeDates)||void 0===u?void 0:u[o]:void 0;return f(n,c,v,e,s)},w=function(t){var e=t.unixtime,o=t.dateLangKey,a=t.monthsLangKey,i=t.relativeFromDay,u=t.relativeLangKey,l=n(""),c=l[0],v=l[1];return r((function(){if(e){var n=y(e,o,a,i,u);v(n)}}),[o,a,i,u,e]),e?c:""},D=function(){return D=Object.assign||function(n){for(var r,t=1,e=arguments.length;t<e;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n},D.apply(this,arguments)},L=t({getLang:function(){return""},getLangDate:function(){return""}}),j=function(){return e(L)},M=function(n){var t=n.children,e=o((function(n){return n+1}),0)[1];r((function(){return window.addEventListener(s,e),function(){window.removeEventListener(s,e)}}),[]);var i={getLang:p,getLangDate:y};return a(L.Provider,D({value:i},{children:t}))};export{M as LangsProvider,p as getLang,y as getLangDate,i as monthKeys,m as setLangPack,w as useClientDate,j as useLangs};
//# sourceMappingURL=index.js.map
