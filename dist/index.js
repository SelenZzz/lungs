import{useState as n,useEffect as e,useReducer as t}from"react";import{jsx as r,Fragment as o}from"react/jsx-runtime";var a=function(n,e){if(!e)return n;for(var t=0,r=Object.entries(e);t<r.length;t++){var o=r[t],a=o[0],i=o[1];n=n.replaceAll("{".concat(a,"}"),i.toString())}return n},i=function(n,e,t){if(void 0===n&&(n=""),"object"!=typeof n)return a(n,e);if(!t)return a(n[5],e);var r="1",o=Math.floor(t/10)%10==1;!o&&[2,3,4].includes(t%10)&&(r="2"),(o||[5,6,7,8,9,0].includes(t%10))&&(r="5");var i=n[r];if(e)for(var u=0,l=Object.entries(e);u<l.length;u++){var c=l[u],v=c[0],f=c[1];i=i.replaceAll("{".concat(v,"}"),f.toString())}return a(i,e)},u=3600,l=86400,c=function(n,e,t,r,o){var a=Math.round((+new Date-n)/1e3);return r&&a<l*r?o?function(n,e){var t=e,r=Math.round((+new Date-n)/1e3);if(r<30)return i(t.just);if(r<60)return i(t.seconds,{seconds:r},r);if(r<u){var o=Math.floor(r/60);return i(t.minutes,{minutes:o},o)}if(r<l){var a=Math.floor(r/u);return i(t.hours,{hours:a},a)}if(r<2*l)return i(t.yesterday);var c=Math.floor(r/l);return i(t.more,{days:c},c)}(n,o):"":e&&t?function(n,e,t){var r=new Date(n),o=r.getDate(),a=r.getMonth().toString(),i=r.getFullYear(),u=e;return(u=(u=u.replace("{day}",o.toString())).replace("{month}",t[a])).replace("{year}",i.toString())}(n,e,t):""},v="yermak-langs-cache",f=function(){localStorage.removeItem(v)},d="langpackupdate",s=new Event(d),m=null,g=null,h=function(n){m=n},p=function(){return g},y=function(n){g=n,n&&function(n){var e=JSON.stringify(n),t=n.hash+e;localStorage.setItem(v,t)}(n),dispatchEvent(s)},S=function(n){var e,t;if((32!==(t=(null!==(e=localStorage.getItem(v))&&void 0!==e?e:"").slice(0,32)).length?(f(),null):t)!==m)null==n||n();else{var r=function(){var n,e=(null!==(n=localStorage.getItem(v))&&void 0!==n?n:"").slice(32),t=JSON.parse(e);return"object"!=typeof t?(f(),null):t}();y(r)}},w=function(n,e,t){var r=p();if(!(null==r?void 0:r.commons))return"";var o=r.commons[n];return i(o,e,t)},D=function(n,e,t,r,o){var a,i,u,l=p();if(!(null==l?void 0:l.commons)||!l.dates||!(null==l?void 0:l.relativeDates))return"";var v=null===(a=null==l?void 0:l.dates)||void 0===a?void 0:a[e],f=null===(i=null==l?void 0:l.months)||void 0===i?void 0:i[t],d=o?null===(u=null==l?void 0:l.relativeDates)||void 0===u?void 0:u[o]:void 0;return c(n,v,f,r,d)},M=function(t){var r=t.unixtime,o=t.dateLangKey,a=t.monthsLangKey,i=t.relativeFromDay,u=t.relativeLangKey,l=n(""),c=l[0],v=l[1];return e((function(){if(r){var n=D(r,o,a,i,u);v(n)}}),[o,a,i,u,r]),r?c:""},j=function(n){var a=n.children,i=n.targetHash,u=n.onNeedLoad,l=t((function(n){return n+1}),0)[1];return e((function(){return i&&h(i),S(u),window.addEventListener(d,l),function(){window.removeEventListener(d,l)}}),[]),r(o,{children:a})},L=["0","1","2","3","4","5","6","7","8","9","10","11"];export{j as LangsProvider,w as getLang,D as getLangDate,p as getLangPack,S as initLangPack,L as monthKeys,y as setLangPack,h as setTargetLangPackHash,M as useClientDate};
//# sourceMappingURL=index.js.map
